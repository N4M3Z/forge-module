# forge-module

A template for creating forge modules -- plugins that teach AI coding assistants your project's conventions. Works with Claude Code, Gemini CLI, Codex, and OpenCode.

Ships as a working example with one agent and one skill. Clone, rename, customize.

## Getting Started

1. Clone this template:
   ```bash
   git clone --recurse-submodules https://github.com/N4M3Z/forge-module.git forge-my-module
   cd forge-my-module
   rm -rf .git && git init
   git submodule add https://github.com/N4M3Z/forge-lib.git lib
   ```

2. Rename these (find and replace across all files):

   | Find | Replace with | Example |
   |------|-------------|---------|
   | `forge-module` | Your module name | `forge-python-style` |
   | `ExampleAgent` | Your agent name (PascalCase) | `PythonReviewer` |
   | `ExampleConventions` | Your skill name (PascalCase) | `PythonStyle` |
   | `Example conventions reviewer` | Your agent description | `Python style and conventions reviewer` |
   | `Example project conventions` | Your skill description | `Python style and linting conventions` |

   Files to update: `module.yaml`, `plugin.json`, `defaults.yaml`, `agents/ExampleAgent.md`, `skills/ExampleConventions/SKILL.md`, `skills/ExampleConventions/SKILL.yaml`, `tests/test.sh`, `README.md`, `INSTALL.md`, `VERIFY.md`

   Don't forget to rename: `agents/ExampleAgent.md` and `skills/ExampleConventions/`

3. Edit your agent and skill with actual content.

4. Deploy:
   ```bash
   make install
   ```

## Quick Start

```bash
# As a Claude Code plugin (standalone)
claude plugin install forge-my-module

# Or as part of forge-core (submodule)
git submodule add https://github.com/YOU/forge-my-module.git Modules/forge-my-module
```

Once active, Claude Code discovers the agent and skill automatically.

## Layout

```
forge-module/
├── agents/
│   └── ExampleAgent.md          # Agent definition (frontmatter + instructions)
├── skills/
│   └── ExampleConventions/
│       ├── SKILL.md              # Skill content (what the AI reads)
│       └── SKILL.yaml            # Skill metadata + provider routing
├── lib/                          # git submodule -> forge-lib (Rust binaries)
├── hooks/
│   └── hooks.json                # Hook registration (empty -- no events needed)
├── defaults.yaml                 # Agent roster + skill config + provider models
├── module.yaml                   # Module metadata (name, version)
├── .claude-plugin/
│   └── plugin.json               # Plugin discovery (standalone mode)
├── .claude/                      # Generated by `make install` (gitignored)
├── .gemini/                      # Generated by `make install` (gitignored)
├── .codex/                       # Generated by `make install` (gitignored)
├── .opencode/                    # Generated by `make install` (gitignored)
├── tests/
│   └── test.sh                   # Module tests
├── .githooks/
│   └── pre-commit                # Shellcheck lint (if available)
├── CLAUDE.md                     # Claude Code context (autogenerated)
├── GEMINI.md                     # Gemini CLI context (autogenerated)
├── AGENTS.md                     # Codex/OpenCode context (autogenerated)
├── .github/
│   └── copilot-instructions.md   # Copilot context (autogenerated)
├── .gitignore
├── CONTRIBUTING.md
├── INSTALL.md
├── VERIFY.md
├── LICENSE
└── README.md
```

## What Gets Installed

| Component | Claude Code | Gemini CLI | Codex | OpenCode |
|-----------|------------|------------|-------|----------|
| ExampleAgent | `.claude/agents/ExampleAgent.md` | `.gemini/agents/ExampleAgent.md` | `.codex/agents/ExampleAgent.toml` + `.prompt.md` | -- |
| ExampleConventions skill | `.claude/skills/ExampleConventions/` | via `gemini skills` | `.codex/skills/ExampleConventions/` | `.opencode/skills/example-conventions/` |

## Configuration

**defaults.yaml** -- checked into git (single source of truth):

```yaml
agents:
    ExampleAgent:
        model: fast
        tools: Read, Grep, Glob

skills:
    ExampleConventions:
        scope: workspace

providers:
    claude:
        fast: claude-sonnet-4-6
    gemini:
        fast: gemini-2.0-flash
    codex:
        fast: gpt-5.1-codex-mini
```

**config.yaml** -- gitignored, user creates to override:

```yaml
# Example: change agent's model tier
agents:
    ExampleAgent:
        model: strong
```

## Dependencies

| Dependency | Required | Purpose |
|-----------|----------|---------|
| forge-lib | Yes (standalone) | Shared deployment utilities (Rust binaries) |
| Rust toolchain | Yes (first build) | Builds forge-lib binaries |
| shellcheck | Recommended | `brew install shellcheck` -- shell script linting |

## Testing

```bash
bash tests/test.sh        # module structure tests
make test                 # validate-module (forge-lib)
make lint                 # shellcheck
```

See [CONTRIBUTING.md](CONTRIBUTING.md) for code style and linting requirements.
